<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.site.admin.order.orderList.dao.AdOrderListDao">
	
	<select id="getSellList" resultType="slvo">
		/*판매 내역 전체 조회*/
		 select order_num, sell_ea, to_char(sell_date,'yyyy-mm-dd hh24:mi:ss') sell_date, sell_money, 
		 coupon_no, m_num, mt, to_char(enddate,'yyyy-mm-dd hh24:mi:ss') enddate
		from sell order by sell_date desc, enddate desc
	</select>
	
	<select id="getOrderList" parameterType="slvo" resultType="ovo">
		/*판매 목록 내역 조회*/
		select pd_num, order_ea, order_money, order_ok, transit_num
		from order_list where order_num = #{order_num}
	</select>
	
	<select id="getSearchDate" parameterType="mkvo" resultType="slvo">
		/*판매 내역 날짜 조건 검색*/
		 select order_num, sell_ea, to_char(sell_date,'yyyy-mm-dd hh24:mi:ss') sell_date, sell_money, 
		 coupon_no, m_num, mt, to_char(enddate,'yyyy-mm-dd hh24:mi:ss') enddate
		from sell
		<where>
			<if test="sDate!=null">
				<![CDATA[sell_date>#{sDate} and sell_date<#{eDate}]]>
			</if>
			<if test="monthkey!=0">
				<![CDATA[sell_date>sysdate-#{monthkey}]]>
			</if>
		</where>
		order by sell_date desc, enddate desc
	</select>
	
	<select id="getOrderProduct" parameterType="cvo" resultType="aopvo">
		/*발주 확인 뷰*/
		select pd_num, mg_name, mcom_name, char_manager, char_tel, char_email, total_ea, total_cost, memo
		from orderProduct
		<where>
			<if test="keyword != 'all'">
				memo = #{keyword}
			</if>
		</where>
	</select>
	
</mapper>